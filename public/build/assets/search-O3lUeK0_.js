const l=document.querySelector("#cityzip");let o=document.createElement("option"),n=document.querySelector("#cityzip-ts-control");$("#sort-by").on("change",function(){let e=i();e.length==1?window.location.replace("/"):window.location.replace("/custom/"+e)});$(".modal-footer button").on("click",function(e){var t=$(e.target);$(this).closest(".modal").one("hidden.bs.modal",function(){if(t[0].id=="saveChanges"){let a=i();a.length==1?window.location.replace("/"):window.location.replace("/custom/"+a)}})});function i(){let e="?";if((parseInt($("#mdl-price-0").val())||parseInt($("#mdl-price-1").val()))&&(e+="price="+parseInt($("#mdl-price-0").val())+"-"+parseInt($("#mdl-price-1").val())),(parseInt($("#mdl-beds-0").val())||parseInt($("#mdl-beds-1").val()))&&(e+=(e.slice(-1)=="?"?"beds=":"&beds=")+parseInt($("#mdl-beds-0").val())+"-"+parseInt($("#mdl-beds-1").val())),(parseInt($("#mdl-baths-0").val())||parseInt($("#mdl-baths-1").val()))&&(e+=(e.slice(-1)=="?"?"baths=":"&baths=")+parseInt($("#mdl-baths-0").val())+"-"+parseInt($("#mdl-baths-1").val())),(parseInt($("#mdl-sqft-0").val())||parseInt($("#mdl-sqft-1").val()))&&(e+=(e.slice(-1)=="?"?"sqft=":"&sqft=")+parseInt($("#mdl-sqft-0").val())+"-"+parseInt($("#mdl-sqft-1").val())),(parseInt($("#mdl-lot-0").val())||parseInt($("#mdl-lot-1").val()))&&(e+=(e.slice(-1)=="?"?"lot=":"&lot=")+parseInt($("#mdl-lot-0").val())+"-"+parseInt($("#mdl-lot-1").val())),$("#include-region").length>0&&$("#include-region").prop("checked")){let t="";$.isNumeric($("#current-region").text())?t="zip":t="city",e+=(e.slice(-1)=="?"?t+"=":"&"+t+"=")+$("#current-region").text()}return $("#sort-by").val()&&(e+=(e.slice(-1)=="?"?"orderby=":"&orderby=")+$("#sort-by").val()),e}function s(e){$.isNumeric(e)?window.location.replace("/custom?zip="+e):window.location.replace("/custom?city="+e)}async function c(){(await axios.get("/loadcity")).data.forEach(a=>{a.address_city&&(o=document.createElement("option"),o.innerHTML=a.address_city,l.appendChild(o))}),r()}async function r(){(await axios.get("/loadpostal")).data.forEach(a=>{a.address_postal_code&&(o=document.createElement("option"),o.innerHTML=a.address_postal_code,l.appendChild(o))}),new TomSelect("#cityzip",{create:!1,openOnFocus:!1,closeAfterSelect:!0,maxItems:1,maxOptions:5,sortField:{field:"text",direction:"asc"}}),n=document.querySelector("#cityzip-ts-control"),$("#cityzip-ts-control").keyup(function(){this.value==""&&n.dispatchEvent(new KeyboardEvent("keydown",{keyCode:27}))}),$("#cityzip").change(function(){this.value&&s(this.value)})}c();
